
module.exports = class Statusbar extends Layer
  constructor: (options={}) ->
    options.theme ?= "black"
    options.scale ?= Framer.Device.contentScale

    super
      name: "statusbar"
      width: Framer.Screen.width / options.scale
      height: 40 / options.scale
      backgroundColor: "transparent"

    @networkLayer = new Layer
      name: "network"
      superLayer: @
      height: @height
      width: 190 / options.scale
      x: 12 / options.scale
      backgroundColor: "transparent"
    @networkLayer.style.backgroundImage = "url(data:image/png;base64,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)"

    @timeLayer = new Layer
      name: "time"
      superLayer: @
      height: @height
      width: 92 / options.scale
      midX: @midX
      backgroundColor: "transparent"
    @timeLayer.style.backgroundImage = "url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFwAAAAoCAYAAABzXJ2PAAAAAXNSR0IArs4c6QAABKhJREFUaAXtl7+vZVMUx+8IkYhJKCYKJKeQ6YZGJZNoNIppSWieRgSJ4qF1KhLhD/CjUlAop1AQyVNMMioaheZMg4IQJjRGWJ875/vyvfuufc7GPI29knXX2uv3XvvH2Xez6dA70DvQO9A70DvQO9A70DvQO9A70DvQO9A7cCM7cCoJdjZkDwXeFvhD4OeBVwJvFNwdgZ4I/DDwSuAaUMfLge8EfrNm3KC/M2zeC/w28Grgi4FL8FIo75sNWuwV6y0xQb8LHG28ZWn0nwt4unT4B+ObLP5Pjf5MmLpa7dfC0gif55kVh6mwZ8HWYAgDz0GMHRhi5AZM7qiQob858N+Ax/yiIdC5sFFdLfZrIX3BFdd3YuZPXtlCx8yokL0fY/eZCv1298jggim5ctx5NN3fZYmrHNC9IuaA54M+FlhOtGY/uzWRR8LKaxCfXa0KWNaBzxJki7pTO3eqEtPcDKSHLhWX+SLjHvYY8BOKArJi5ZfZF+6rQ2IQD+qnh0WuQdZwfGuQLepO7d5w7vEMng0hhYJDoMCLGSRMKAnx5fiye+GRlcBiEvPIENuafaiagbtXsQ5mL42nhSiaIzZctfhcbLDXPLDfie8Nf7ASSB8unAezUTGl3Ew27ov8IHCvCBQVUI6doiu2S+IxlOQFOXGAf0BPXxft/So/TT4IVIzse0YM6dnp+DCeArfAEb5l5pfIXUvKBR2L+fqsv3+mmuyC24moXpmjfhn0t5l/zTIdGp+x94bwA1M8arzYZ8QE/TQQnz3wVWE1ONYOpZ4dK2CV0YMZEA/0b4OupylzSGTaYa32SYgNJ1e1sPMcJIdmUOYvx+6jWLpy9mzZ4VcDPzOvH4MfAmkmH5NfAh2+t8G14PEHS/Dn1pOl8j8ev2v5PjEe9jkb165UM9k8Pw+GoP4mZyw4FFNSmgpwPH7dcpvNHUGnmc/Ix5mwkJ2L8dOz7J6gvnt0nH8ufE5qyBX2gAUfjYd9wcZvBv+wjTP2kgnxHefxqyb/2vgqS/M5+joWouzUweTwayBf6JnAYUb4o0DpkXPPL8HesVwyTnS6wpRzjZbfmCy/f2xJ6c/Z0WrIfE19nT0V5NZAEsMDfgcOW0n9x5OvTU56fGrQVHTNOeTKASVWhpPZsUAOWX42ieIOwZ+3sV8zme+2qazYG4FnAzPwna9FyOwk8wmosCV6Ug1nPso7qriEcrplB3VImxYGsr8YvE7t5I7B13yPnUsH/LkGPDgyAadAr5SWhcCPHUS8LBf6EqpFl4bJmGaodt95ielx07D3jVfLr3koPvRCEbjmu3N3s5tpIuA7hIADQgP98yqLNJM9VoVSTAtUi15x9l07rdii9muThRLU8rPZmLcjOR1qvtsnoDtm/OiRZl4BsR8SfSZSw6dMmciUo9VeIQ6C0TzKnScbp5xQ2UP5jgFL+aXD3hdp65j56u68Fkr+cfo/KTlBHw8cYQq4bOPfjW9hW5+Feje32iv3U2KCfmR8jaVpb5tS18pXsyzLrzc5JofmW7LHvqxqCchun4V/BNW7ubTr496B3oHegd6B3oHegd6B3oHegd6B3oHegd6B3oHegf9bB/4C36jUoxDUJuQAAAAASUVORK5CYII=)"

    @batteryLayer = new Layer
      name: "battery"
      superLayer: @
      height: @height
      width: 122 / options.scale
      maxX: @maxX - (12 / options.scale)
      backgroundColor: "transparent"
    @batteryLayer.style.backgroundImage = "url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAAoCAYAAAA16j4lAAAAAXNSR0IArs4c6QAABPRJREFUeAHtmT+IHVUUxhNdVxAsJEYIxjA22ykIFoJaxXbbNIK8OtiJNoIsFqJiLdiJQgrBShMCKcJKUgoiVjZPCKaxMI2iFur3e873+BjunZndxllyD5x37pw/d879zj135r136lSjhkBDoCHQEGgINAQaAg2BhkBDoCHQEGgINAQaAg2BhsBJQOD0SJL7sp0RfzriY9OTGrwoflz8u/hb8Q/if8Q12pHhBfGzvcMdyVviX/vrmtiT4ZXe+L3kbfHUfX7p/d+W/LgfT4ldObwrfk18bsr5f7Tf1b0/F78j/mtuHg/IEdDgTlwjirQW23con68EXhqJOazEoP6uEvfwzJgxv+EUH0hxTXx+aFjY9VN9nu8fJS9AdrG6kUD7WBJHB/oaSXcnvaSLtK91nffDRiGHtJLCcWyQZ+L6K41LdFlKx9Q2WykOHZ1Bca+KPccS5dfKjyKTb5Uek4Vj70A8XEQnXYmyUGs50PWmBHZYrJzfRy1xj4jTNtwY7t5PfBNJ4h1zOvQMibctYwZu1UtiIc+xZOk8NwmXPt4cWUhXCpCOrvGiS0efC4LPTj8HG8kxH/W6FFkUcjLlI2PPSsncFLnBcPF9kMchx+U8Sx2zPudbXCsvVBSEoxLO4nS6HhLd4sXiW6Ls8K53WEk6zrretBW2r7ea/wbWM68p88gCX5GD/dlUxyHiIc+zZOk8NwnP+TgbC+sKAQlsdlq6Zrf6KM6jOwuScXkyWJ8d3FkpWergPLZ5Vh+XTmqByftP8XssvAbyLsYRejBsv8U4h/fi4rl+/EToDGCoNsMvQ+H8/pbup17/etgvxhgfCn6j130j+UU/vt8E9XtjbNH5LOwKjuh8ZJXshJS6fN3H1Y514mpdnnq6NN+i/RKVb/DMxSnCiYAeZjz3yPYG9DqXLLWsTT0snSvXRZoqMJ3iSbriDOUC+9l+WIlBnYV0B9t9rYHva0nhIB4V1pF/PiKst5xTZHwhxyxZOk9L57p9u8VwFEqApo7z0rwXSsoZuqflQ+e+3PvyS9YtcSf+UAy9Jf5Z7FOCR8UZ8UPiP8TQZ2JeLO9bmurg0vE7BIvu807yi9hYdzo+O3HYwfZJmfdxN2d+bAgTL13ktLZiROIHeQ1Lls7Tklx50aq+ZGEbIwCconPhcD3GU8NXewc6jxenKboZDmzMIf0YCn63hjrxnM2D70kkfpMu/c6wXctUB+PoHe2u2Qb3A3cLfgY+v8JkZ2Ws5/URm7bhOO9R+368E0G5rqkCkwfkfJYsnecm4TkfCURXCWCHeNGlYtmGNPGLl/VrK0NmwRiPUb5EXRk45rF9Nmz8Hu37T51Cztv+S5Ys0fnGcuvDOQVOHyYHPEB7VEz3GRB/hZFqQ2njawtFJ25f7Bgkb+pjlL4lP9sPwnioMXrkFOEHeZ4lS+e5SXjORycnL4hxjSie/Woyj0jmYQPUfK3nZWyM8r7ZoRmz0oXno8NdXHR74im6K4fz4qtiz7NESX7kSb6zie7xYrqJqFX4OgZJdw6LK9WGhl2ecTynxwi7/VdjjrIdiO1ryUkxh/h/9ZoY8JZM5EeeR/o/+DgLYlNQOJgjdw7xrHRM6R+p0hz474unNoJj8x5z8yJ2VwxofKf25liipHPJk3wbNQQaAg2BhkBDoCHQEGgINAQaAg2BhkBDoCHQEGgINAQaAg2BJSLwLzTurojYAVMOAAAAAElFTkSuQmCC)"

    @theme = options.theme

  @define "theme",
    get: -> @_theme
    set: (value) ->
      @_theme = value
      @invert = if value is "black" then 0 else 100

